#version 430
#extension GL_NV_shadow_samplers_cube : enable

layout(location=2) uniform vec4 lightPos;

layout(location=3) uniform samplerCube skybox;


in vec4 fcolor;
in vec4 fpos;
in vec4 fnorm;

in int fTextType;

in vec3 cubeCoords;

out vec4 gli_FragColor;

void main() {
	
	float amb=0.5f;	
	float diffuse=0.0f;
	
	vec4 L=normalize(lightPos-fpos);
	float I=1.0f;
	float K=1.0f;
	
	diffuse=I*K*max(dot(L,fnorm),0.0f);
	
	float specular=0.0f;
	
        gli_FragColor = fcolor*(amb+diffuse+specular);

	vec4 textColor= vec4(1.0f,0.0f,0.0f,1.0f);

  if(fTextType==1){
   textColor = texture2D(texture,tempCoord);

  }else if(fTextType==2) {
   textColor =  texture(skybox, texCoords);
  }

   gli_FragColor = textColor;
	
}
