#version 430


layout(location=2) uniform vec4 lightPos;

layout(location=3) uniform vec4 eyePos;

layout(location=4) uniform sampler2D texture;

layout(location=5) uniform vec2 scroll;

layout(location=6) uniform samplerCube skybox;


in vec4 fcolor;

in vec4 fpos;

in vec4 fnorm;

in vec2 ftext;

in int fTextType;

in vec3 cubeCoords;


out vec4 gli_FragColor;

a

void main() {
	

	/*vec4 finalColor=fcolor;

	float amb=0.2f;

	float diffuse=0.0f;


    vec2 tempCoord;
	tempCoord = ftext;

	tempCoord.x += scroll.x;
	tempCoord.y += scroll.y;

	vec4 textColor=texture2D(texture,tempCoord);


	if( textColor.a < 0.5f){
	    discard;
	}

	finalColor+=textColor;

	vec4 lightDir=normalize(lightPos-fpos);

	vec4 reflectDir=2*fnorm*(dot(lightDir,fnorm))-lightDir;

	vec4 eyeDir =normalize(eyePos-fpos);

	diffuse=max(dot(fnorm,lightDir),0.0f);//color luz


	float specular=pow(max(dot(eyeDir,reflectDir),0.0f),256);


  //gli_FragColor = (finalColor)*(amb+diffuse+specular);
  gli_FragColor = textColor;
  */
  vec4 textColor= vec4(1.0f,0.0f,0.0f,1.0f);

  if(fTextType==1){
   textColor = texture2D(texture,tempCoord);

  }else if(fTextType==2) {
   textColor =  texture(skybox, texCoords);
  }

    gli_FragColor = textColor;


	/*float amb=0.5f;	
	float diffuse=0.0f;
	
	vec4 L=normalize(lightPos-fpos);
	float I=1.0f;
	float K=1.0f;
	
	diffuse=I*K*max(dot(L,fnorm),0.0f);
	
	float specular=0.0f;
	
    gli_FragColor = fcolor*(amb+diffuse+specular);*/
	



}